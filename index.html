<!DOCTYPE html>
<html>

<head>
    <title>N-Segment Robot Arm State Space Exploration</title>
</head>

<body>
    <select id="rrt_mode">
        <option value="RRT">RRT</option>
        <option value="Gradient">Gradient</option>
    </select>

    <div class="grid-container">
        <div class="item">
            <h1>physical layout</h1>
        </div>
        <div class="item">
            <h1>configuration space</h1>
        </div>
        <div class="invis_item">

        </div>
        <div>
            <div class="item">
                <canvas id="arm_canvas"></canvas>
            </div>
        </div>
        <div>
            <div class="item" style="position: relative;">
                <canvas id="loss_heatmap_canvas"></canvas>
                <canvas id="loss_highres_canvas"></canvas>
            </div>
        </div>
        <div class="item">
            <div>
                <p>segment amount
                    <input type="number" id="arm_amount" value="2" min="2" step="1"
                        onwheel="parseInt(this.value) + (event.deltaY > 0 ? 1 : -1)">
                </p>
                <div class="horizontal_layout">
                    <p>Loss = </p>
                    <select id="select_loss">
                        <option value="L2 squared">L2 squared</option>
                        <option value="L2">L2</option>
                        <option value="L1 squared">L1 squared</option>
                        <option value="L1">L1</option>
                        <option value="Match Y">Match height</option>
                    </select>
                </div>
                <p></p>

                <div class="junction_box">
                    <div class="horizontal_layout">
                        <input type="checkbox" id="toggle_level_set">
                        <label for="toggle_level_set">minimize level sets</label>
                    </div>

                    <input type="range" id="slider_level_set_scale" min="0.001" max="0.5" step="0.001" value="0.25">
                    <label for="slider_level_set_scale">level set density</label>
                    <div class="horizontal_layout">
                        <label for="number_level_set_offset">level set browser</label>
                        <input type="number" id="number_level_set_offset" value="0"
                            onwheel="parseInt(this.value) + 0.5*(event.deltaY > 0 ? 1 : -1)">
                    </div>
                </div>
                <p></p>
                <div class="junction_box">
                    <div>
                        <p>segment on horizontal axis index
                            <input type="number" id="x_axis_index" value="0" min="0" step="1" max="0"
                                onwheel="parseInt(this.value) + (event.deltaY > 0 ? 1 : -1)">
                        </p>
                        <p>segment on vertical axis index
                            <input type="number" id="y_axis_index" value="1" min="1" step="1" max="1"
                                onwheel="parseInt(this.value) + (event.deltaY > 0 ? 1 : -1)">
                        </p>
                    </div>
                    <p></p>
                </div>
            </div>
        </div>

        <div class="item">
            <p>Steer the arm target position (purple circle) with the WASD keys. The arm will try to let its tip follow
                the it through minimization of the loss function with gradient descent. How the error between tip
                position and target is calculated can be selected on the right.
            </p>
        </div>
        <div class="item">
            <p>
                Nudge the arm in state space to solutions of approximate equal cost with the arrow keys. Tick "minimize
                level sets" to explore not just the class of best solutions, but sets of solutions of any quality. With
                this selected, the L2 (squared) loss this lets the tip of the arm trace circles of varying radius around
                the target. With the L1 loss (manhattan distance) it traces a square balanced on its tip. </p>
        </div>
        <div class="item">

        </div>
    </div>

    <div id="credits">
        <a href="https://hojmax.github.io/Inverse-Kinematics/">inspired by a Hojmax project</a>
    </div>
    <div>


    </div>
    <!-- add style.css -->
    <link rel="stylesheet" href="./style.css">

    <!-- <script src="./dist/v2.js"></script>
    <script src="./dist/utils.js"></script>
    <script src="./dist/plotlib.js"></script>
    <script src="./dist/arm.js"></script>
    <script src="./dist/input.js"></script>
    <script src="./dist/trail.js"></script>
    <script src="./dist/svg.js"></script>
    <script src="./dist/settings.js"></script>
    <script src="./dist/app.js"></script> -->

    <script src="dist/bundle.js"></script>
    <!-- <script src="dist/bundle.js.map.json"></script> Include the source map file -->

</body>

</html>